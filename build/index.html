<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="shortcut icon" href="/favicon.ico"/><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono" rel="stylesheet"/><link href="//fonts.googleapis.com/css?family=Dosis:500&text=LabelStudio" rel="stylesheet"/><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="/styles/main.css"><title>NIA Satellite Data</title><link href="/static/css/2.b6f51f8b.chunk.css" rel="stylesheet"><link href="/static/css/main.2f1ce725.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="header"><button style="display:block" onclick='document.getElementById("json-upload-button").click()'>Select JSON</button> <input type="file" id="json-upload-button" style="display:none" accept="application/json"> <button id="json-download-button">Download JSON</button></div><div id="ls-container"><div id="label-studio"></div></div><script>var result,upload_button=document.querySelector("#json-upload-button");function handleJSONFile(){var e=this.files;e.length>1&&alert("Please upload a single json file at the same time");var a=new FileReader;a.addEventListener("load",(function(){json_info=JSON.parse(a.result),window.json_info=json_info;var l,o=json_info.features[0].properties;l="EMPTY"!==o.building_imcoords?"building":"EMPTY"!==o.road_imcoords?"road":"object";var t=json_info.features[0].properties.image_id;t&&t.match&&t.match("tif")&&(t=(t=t.replace("tif","png")).replace("PS4","PS3"));var i={appType:l,geometry:json_info.features[0].geometry,imageId:t,fileName:e[0].name};window.APP_INFO=i;var n=[];if("object"===APP_INFO.appType){APP_INFO.classMap={"small ship":"1","large ship":"2","civilian aircraft":"3","military aircraft":"4","small car":"5",bus:"6",truck:"7",train:"8",crane:"9",bridge:"10","oil tank":"11",dam:"12","indoor playground":"13","outdoor playground":"14",helipad:"15",roundabout:"16",helicopter:"17","individual container":"18","grouped container":"19","swimming pool":"20",etc:"21"};for(var r=0;r<json_info.features.length;r++){var s=json_info.features[r].properties.object_imcoords.split(",").map(e=>parseFloat(e)),u=parseFloat(json_info.features[r].properties.object_angle),p=json_info.features[r].properties.type_name,d=[];ys=[],xrs=[],yrs=[];for(var m=0;m<s.length;m++)m%2==0?d.push(s[m]):ys.push(s[m]);var b=Math.sqrt(Math.pow(d[1]-d[0],2)+Math.pow(ys[1]-ys[0],2)),g=Math.sqrt(Math.pow(d[2]-d[1],2)+Math.pow(ys[2]-ys[1],2));n.push({from_name:"tag",id:"annotation_"+r,source:"$image",to_name:"img",type:"rectanglelabels",value:{rectanglelabels:[""+p],rotation:180*-u/Math.PI,width:b/1024*100,height:g/1024*100,x:d[0]/1024*100,y:ys[0]/1024*100}})}var c='\n              <View>\n                <Image name="img" value="$image" zoom="true"></Image>\n                <RectangleLabels name="tag" toName="img">\n                  <Label value="small ship"></Label>\n                  <Label value="large ship"></Label>  \n                  <Label value="civilian aircraft"></Label>  \n                  <Label value="military aircraft"></Label>  \n                  <Label value="small car"></Label>  \n                  <Label value="bus"></Label>  \n                  <Label value="truck"></Label>  \n                  <Label value="train"></Label>  \n                  <Label value="crane"></Label>  \n                  <Label value="bridge"></Label>  \n                  <Label value="oil tank"></Label>  \n                  <Label value="dam"></Label> \n                  <Label value="indoor playground"></Label> \n                  <Label value="helipad"></Label> \n                  <Label value="roundabout"></Label> \n                  <Label value="helicopter"></Label> \n                  <Label value="outdoor playground"></Label> \n                  <Label value="swimming pool"></Label> \n                  <Label value="individual container"></Label> \n                  <Label value="grouped container"></Label> \n                  <Label value="etc"></Label> \n                </RectangleLabels>\n              </View>\n            '}else if("building"===APP_INFO.appType){APP_INFO.classMap={"소형 시설":"1","아파트":"2","공장":"3","컨테이너 박스":"4","중형 단독 시설":"5","대형 시설":"6","기타":"7","":"8"};for(c='\n            <View>\n              <Image name="img" value="$image" zoom="true"></Image>\n              <PolygonLabels name="tag" toName="img">\n                <Label value="소형 시설"></Label>\n                <Label value="아파트"></Label>\n                <Label value="공장"></Label>\n                <Label value="컨테이너 박스"></Label>\n                <Label value="중형 단독 시설"></Label>\n                <Label value="대형 시설"></Label>\n                <Label value=""></Label>\n              </PolygonLabels>\n            </View>\n            ',r=0;r<json_info.features.length;r++){s=json_info.features[r].properties.building_imcoords.split(",").map(e=>parseFloat(e)),p=json_info.features[r].properties.type_name;var v=[];for(m=0;m<s.length;m+=2)v.push([s[m]/1024*100,s[m+1]/1024*100]);n.push({from_name:"tag",id:"annotation_"+r,source:"$image",to_name:"img",type:"polygonlabels",value:{polygonlabels:[""+p],points:v}})}}else if("road"===APP_INFO.appType){APP_INFO.classMap={Mortorway:"1",Primary:"2",Secondary:"3",Tertiary:"4",Residential:"5",Unclassified:"6","기타":"7","":"7"};for(c='\n            <View>\n              <Image name="img" value="$image" zoom="true"></Image>\n              <PolygonLabels name="tag" toName="img">\n                <Label value="Mortorway"></Label>\n                <Label value="Primary"></Label>\n                <Label value="Secondary"></Label>\n                <Label value="Tertiary"></Label>\n                <Label value="Residential"></Label>\n                <Label value="Unclassified"></Label>\n                <Label value="기타"></Label>\n              </PolygonLabels>\n            </View>\n            ',r=0;r<json_info.features.length;r++){for(s=json_info.features[r].properties.road_imcoords.split(",").map(e=>parseFloat(e)),p=json_info.features[r].properties.type_name,v=[],m=0;m<s.length;m+=2)v.push([s[m]/1024*100,s[m+1]/1024*100]);n.push({from_name:"tag",id:"annotation_"+r,source:"$image",to_name:"img",type:"polygonlabels",value:{polygonlabels:[""+p],points:v}})}}else alert("not implemented yet.. for "+APP_INFO.appType);var _=new LabelStudio("label-studio",{config:c,interfaces:["panel","update","controls","side-column","completions:menu","completions:add-new","completions:delete"],user:{pk:1,firstName:"User",lastName:""},task:{completions:[{id:"sample",lead_time:1,result:n}],predictions:[],id:1,data:{image:"./images/"+t}}});window.labelStudio=_})),a.readAsText(e[0])}upload_button.addEventListener("change",handleJSONFile);const download_button=document.querySelector("#json-download-button");download_button.addEventListener("click",(function(){var e={features:[],type:"FeatureCollection"},a=labelStudio.completionStore.selected.serializeCompletion();if("object"===APP_INFO.appType)for(var l of a){var o=[l.value.x/100*l.original_width,l.value.y/100*l.original_height],t=[(l.value.x+l.value.width)/100*l.original_width,l.value.y/100*l.original_height],i=[l.value.x/100*l.original_width,(l.value.y+l.value.height)/100*l.original_height],n=[(l.value.x+l.value.width)/100*l.original_width,(l.value.y+l.value.height)/100*l.original_height],r=rotateByTheta(t,o,l.value.rotation*Math.PI/180),s=rotateByTheta(i,o,l.value.rotation*Math.PI/180),u=rotateByTheta(n,o,l.value.rotation*Math.PI/180);e.features.push({geometry:APP_INFO.geometry,properties:{road_imcoords:"EMPTY",building_imcoords:"EMPTY",object_imcoords:o.concat(r,u,s).reduce((e,a)=>e+(a+","),"").slice(0,-1),object_angle:-l.value.rotation*Math.PI/180,image_id:APP_INFO.imageId,ingest_time:(new Date).toISOString(),type_id:APP_INFO.classMap[l.value.rectanglelabels[0]],type_name:l.value.rectanglelabels[0]}})}else if("building"===APP_INFO.appType)for(var l of a){var p=[];for(var d of l.value.points){var m=d[0]/100*l.original_width,b=d[1]/100*l.original_height;p.push(m),p.push(b)}e.features.push({geometry:APP_INFO.geometry,properties:{road_imcoords:"EMPTY",building_imcoords:p.reduce((e,a)=>e+(a+","),"").slice(0,-1),object_imcoords:"EMPTY",image_id:APP_INFO.imageId,ingest_time:(new Date).toISOString(),type_id:APP_INFO.classMap[l.value.polygonlabels[0]],type_name:l.value.polygonlabels[0]}})}else if("road"===APP_INFO.appType)for(var l of a){p=[];for(var d of l.value.points){m=d[0]/100*l.original_width,b=d[1]/100*l.original_height;p.push(m),p.push(b)}e.features.push({geometry:APP_INFO.geometry,properties:{road_imcoords:p.reduce((e,a)=>e+(a+","),"").slice(0,-1),building_imcoords:"EMPTY",object_imcoords:"EMPTY",image_id:APP_INFO.imageId,ingest_time:(new Date).toISOString(),type_id:APP_INFO.classMap[l.value.polygonlabels[0]],type_name:l.value.polygonlabels[0]}})}else alert("not implemented .. "+APP_INFO.appType);var g=new Blob([JSON.stringify(e,0,4)],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(g),v=document.createElement("a");v.href=c,v.target="_blank",v.download=APP_INFO.fileName,document.body.appendChild(v),v.click(),document.body.removeChild(v)}))</script><script>window.rotateByTheta=function(t,e,n){e||(e=[0,0]);var a=[];return a.push(Math.cos(n)*(t[0]-e[0])-Math.sin(n)*(t[1]-e[1])),a.push(Math.sin(n)*(t[0]-e[0])+Math.cos(n)*(t[1]-e[1])),a[0]+=e[0],a[1]+=e[1],a},function(t,e){t.domReady=function(n,a){e.addEventListener&&e.addEventListener("DOMContentLoaded",(function o(d){e.removeEventListener("DOMContentLoaded",o),n.call(a||t,d)}))||e.attachEvent&&e.attachEvent("onreadystatechange",(function o(d){"complete"===e.readyState&&(e.detachEvent("onreadystatechange",o),n.call(a||t,d))}))}}(window,document)</script><script>domReady((function(){window.json_info=null;var e=new LabelStudio("label-studio",{config:'\n              <View>\n                <Image name="img" value="$image" zoom="true"></Image>\n                <RectangleLabels name="tag" toName="img">\n                  <Label value="풍선"></Label>\n                  <Label value="아이"></Label>\n                </RectangleLabels>\n              </View>\n            ',interfaces:["panel","update","controls","side-column","completions:menu","completions:add-new","completions:delete","predictions:menu"],user:{pk:1,firstName:"User",lastName:""},task:{completions:[{id:"sample",lead_time:1,result:[{from_name:"tag",id:"annotation_0",source:"$image",to_name:"img",type:"rectanglelabels",value:{rectanglelabels:["풍선"],rotation:0,width:34,height:33,x:30,y:12}},{from_name:"tag",id:"annotation_1",source:"$image",to_name:"img",type:"rectanglelabels",value:{rectanglelabels:["아이"],rotation:0,width:37,height:61,x:12,y:35}}]}],id:1,data:{image:"./images/child-play.jpg"}}});window.labelStudio=e,window.APP_INFO={appType:"object",geometry:null,imageId:"child-play.jpg",classMap:{"풍선":"1","아이":"2"},fileName:"child-play-sample.json"}}))</script><script>!function(e){function t(t){for(var n,l,i=t[0],a=t[1],f=t[2],c=0,s=[];c<i.length;c++)l=i[c],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.push(o[l][0]),o[l]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(p&&p(t);s.length;)s.shift()();return u.push.apply(u,f||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,i=1;i<r.length;i++){var a=r[i];0!==o[a]&&(n=!1)}n&&(u.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},o={1:0},u=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var i=this["webpackJsonplabel-studio"]=this["webpackJsonplabel-studio"]||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var f=0;f<i.length;f++)t(i[f]);var p=a;r()}([])</script><script src="/static/js/2.3c3e95dd.chunk.js"></script><script src="/static/js/main.a19c73ea.chunk.js"></script></body></html>